<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšæœºç‚¹å2.0-ä¼šè¯å­˜å‚¨</title>
    <style>
        .box {
            width: 500px;
            height: 500px;
            background-color: #fbe8d3;
            margin: 0 auto;
            padding-top: 30px;
            text-align: center;
        }

        .name {
            font-size: 64px;
        }

        .btn {
            width: 150px;
            height: 50px;
            border: 0;
            font-size: 20px;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            background-color: #00adb5;

        }

        .clear {
            width: 200px;
            margin-top: 60px;
            background-color: crimson;
        }
    </style>
</head>

<body>

    <!-- html -->
    <div class="box">
        <h1>ğŸ˜œçŒœçŒœç‚¹åˆ°è°ï¼ï¼ŸğŸ˜œ</h1>
        <p class="name">ğŸ˜ƒ</p>
        <button class="btn">å¼€å§‹ç‚¹å</button><br>
        <button class="btn clear" onclick="clearSession()">æ¸…é™¤&ensp;sessionStorage</button>
    </div>

    <!-- js -->
    <script>
        // åå•
        let arr = [
            "ç‹é€¸å½¬", "ä¾¯å®‡åš", "æå®ç‘", "æ¨è£èŠ³", "è°·å­é¢–",
            "å¼ é‡‘é¾™", "ä¹”ä¸½å¨‡", "é‚“æ–‡æŸ±", "å­™å˜‰éš†", "æ±Ÿç¼¨çŠ",
            "ä½•è·¯æ¨", "é«˜å©·", "æç®", "æœæ€¡å‡¡", "å•æ™¯è´¤",
            "å½­é”¦ç¦", "ä½•æ”¿ä½³", "å¼ æ•å­¦", "é—¨ç‰æ˜", "ç‹æ¢¦æ¸",
            "æå¤©æ—­", "é«˜æŸæ–‡", "å¼ æ¢“é¹", "å­Ÿæˆæ—º", "å‘¨é–è½©",
            "å¼ å“²", "å¼ éªé©°", "æœ±æ—­", "å€ªå­¦æ¡", "ææ¢¦è½©",
            "å‘¨å¥", "è‚–é‰¥æ³¢", "éŸ©èƒœ", "å‘¨æµ·ç¥¥", "ææµ©é˜”",
            "æé“­å¸…", "å®‹ç´«é˜³", "å¾åš", "è®¸è‰³è¾‰", "ç™½é‘«å",
            "å´”å²©", "å­Ÿåº†è¯º", "ç‹é˜”", "åˆ˜æ™ºè¾‰"
        ];


        let btn = document.querySelector(".btn");
        // å®šæ—¶å™¨çš„ id
        let timeId = null;
        // éšæœºæ•°
        let x = -1;
        // æŒ‰é’®ç‚¹å‡»æ¬¡æ•°
        let count = 1;
        btn.addEventListener("click", function () {
            // æ¯ç‚¹å‡»ä¸€æ¬¡ +1
            count++;

            // å¶æ•°è°ƒç”¨ start() å¥‡æ•°è°ƒç”¨ stop()
            if (count % 2 == 0) {
                start();
            } else {
                stop();
            }

        });

        // å¼€å§‹ç‚¹å
        function start() {
            // ç‚¹å‡»æŒ‰é’®å˜æ ·å¼
            btn.innerHTML = "åœæ­¢";
            btn.style.backgroundColor = "rgb(230, 44, 90)";
            // å®šæ—¶å™¨
            timeId = setInterval(function () {
                // éå†åå•
                for (let i in arr) {
                    // éšæœºæ•°
                    x = Math.floor(Math.random() * arr.length);
                    // å»é‡ï¼Œå»æ‰ç‚¹è¿‡çš„äººå
                    while (arr[x] == sessionStorage.getItem(`name${x}`)) {
                        x = Math.floor(Math.random() * arr.length);
                    }
                    // æ‰“å°åœ¨æµè§ˆå™¨ä¸Š
                    document.querySelector(".name").innerHTML = arr[x];
                }
            }, 2)
        }


        // åœæ­¢ç‚¹å
        function stop() {
            // ç‚¹å‡»æŒ‰é’®å˜æ ·å¼
            btn.innerHTML = "å¼€å§‹ç‚¹å";
            btn.style.backgroundColor = "#00adb5";
            // æ¸…é™¤å®šæ—¶å™¨
            clearInterval(timeId);
            document.querySelector(".name").innerHTML += "ğŸ˜…";
            // ç‚¹åˆ°çš„åå­—å­˜åˆ° sessionStorage é‡Œ
            sessionStorage.setItem(`name${x}`, arr[x])
        }

        // æ¸…é™¤ sessionStorage
        function clearSession() {
            console.log(123);
            sessionStorage.clear();
        }
    </script>
</body>

</html>