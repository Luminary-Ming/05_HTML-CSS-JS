<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* some() ：数组中只要有一个对象符合条件，就返回 true ，如果所以对象都不符合条件就返回 false */
        const arr1 = [1, 2, 3, 4, 5];
        let flag1 = arr1.some(function (item) {
            return item % 2 == 0;
        });
        console.log(flag1);  // true

        /* every() ：数组中每一个对象都符合条件，则返回 true ，只要有一个对象不符合条件就返回 false */
        const arr2 = [1, 30, 39, 29, 10, 13];
        let flag2 = arr2.every(function (item) {
            return item < 40;
        });
        console.log(flag2);  // true

        /* map() ：创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成。 */
        const arr3 = [1, 4, 9, 16];
        const newArr3 = arr3.map(function (item) {
            return item * 2;
        });
        console.log(newArr3);  // [2, 8, 18, 32]

        /* 
            reduce() ：将所有元素归纳计算为一个值，这个方法接受一个回调函数作为累加器，
                以及一个可选的初始值（如果没有提供初始值，则使用数组的第一个元素作为初始值，
                并且数组的第一个元素不会作为第一个参数传递给回调函数）。
        */
        const arr4 = [15, 16, 17, 18, 19];
        /*
            callbackFn ：回调函数，为数组中每个元素执行的函数。
                将其返回值作为下一次调用 callbackFn 函数中的 accumulator 参数的值，
                对于最后一次调用，返回值作为 reduce() 的返回值。
            accumulator ：为上一次调用 callbackFn 的结果值，在第一次调用 callbackFn 时，
                如果有 initValue 初始值，则 accumulator 的值就是 initValue 的值。
                如果没有指定初始值，则 accumulator 的值就是 arr[0] 数组中第一个元素的值。
            currentValue ：当前元素的值。在第一次调用时，
                如果有 initValue 初始值，则为 arr[0] 的值。
                如果没有指定初始值，则为 arr[1] 的值。（此时 accumulator 的值是 arr[0]）
        */
        const callbackFn = function (accumulator, currentValue) {
            return accumulator + currentValue;
        }
        // 没有初始值
        let sum1 = arr4.reduce(callbackFn);
        console.log(sum1);  // 85
        // 有初始值
        let initValue = 10;
        let sum2 = arr4.reduce(callbackFn, initValue);
        console.log(sum2);  // 95

        // 使用 reduce() 计算数组中对象的属性总和
        const fruits = [
            { name: 'Apple', price: 2 },
            { name: 'Banana', price: 4 },
            { name: 'Cherry', price: 9 },
            { name: 'Orange', price: 7 },
        ];
        // 需要传递初始值，不然 acc 的值是一个对象
        let sum = fruits.reduce(function (acc, item) {
            return acc + item.price;
        }, 0);
        console.log(sum);  // 22

    </script>
</body>

</html>